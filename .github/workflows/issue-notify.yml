on:
  issues:
    types: [opened, closed, reopened, edited]

env:
  DISCORD_WEBHOOK: ${{vars.DISCORD_ISSUE_WEBHOOK_URL}}

jobs:
  issue_create_notify:
    if: github.event.action == 'opened'
    uses: ./.github/workflows/discord-notify.yml
    with:
      discord-webhook-url: ${{vars.DISCORD_ISSUE_WEBHOOK_URL}}
      content: |
        ğŸ‰ **M2U ISSUE CREATED**

        **${{ github.actor }} created the issue [#${{github.event.issue.number}}](${{ github.event.issue.html_url }})**

        ### [${{ github.event.issue.title }}](${{ github.event.issue.html_url }})

        ğŸ‘¥ Assignees: 
              ${{ join(github.event.issue.assignees.*.login, ', ') }}

        ğŸ·ï¸ Labels: 
              ${{ join(github.event.issue.labels.*.name, ', ') }}

        ğŸ“Š State: **${{ github.event.issue.state }}**

        ğŸ‘¤ Created by: **${{ github.actor }}**

  issue_close_notify:
    if: github.event.action == 'closed'
    uses: ./.github/workflows/discord-notify.yml
    with:
      discord-webhook-url: ${{vars.DISCORD_ISSUE_WEBHOOK_URL}}
      content: |
        ğŸŠ **M2U ISSUE CLOSED**

        **${{ github.actor }} closed the issue [#${{github.event.issue.number}}](${{ github.event.issue.html_url }})**

        ### [${{ github.event.issue.title }}](${{ github.event.issue.html_url }})

        ğŸ‘¥ Assignees: 
              ${{ join(github.event.issue.assignees.*.login, ', ') }}

        ğŸ·ï¸ Labels: 
              ${{ join(github.event.issue.labels.*.name, ', ') }}

        ğŸ“Š State: **${{ github.event.issue.state }}**

        ğŸ‘¤ Closed by: **${{ github.actor }}**

  issue_reopen_notify:
    if: github.event.action == 'reopened'
    uses: ./.github/workflows/discord-notify.yml
    with:
      discord-webhook-url: ${{vars.DISCORD_ISSUE_WEBHOOK_URL}}
      content: |
        ğŸ”„ **M2U ISSUE REOPENED**

        **${{ github.actor }} reopened the issue [#${{github.event.issue.number}}](${{ github.event.issue.html_url }})**

        ### [${{ github.event.issue.title }}](${{ github.event.issue.html_url }})

        ğŸ‘¥ Assignees: 
              ${{ join(github.event.issue.assignees.*.login, ', ') }}

        ğŸ·ï¸ Labels: 
              ${{ join(github.event.issue.labels.*.name, ', ') }}

        ğŸ“Š State: **${{ github.event.issue.state }}**

        ğŸ‘¤ Reopened by: **${{ github.actor }}**

  issue_edit_notify:
    if: github.event.action == 'edited'
    uses: ./.github/workflows/discord-notify.yml
    with:
      discord-webhook-url: ${{vars.DISCORD_ISSUE_WEBHOOK_URL}}
      content: |
        ğŸ–‹ï¸ **M2U ISSUE UPDATED**

        **${{ github.actor }} updated the issue [#${{github.event.issue.number}}](${{ github.event.issue.html_url }})**

        ### [${{ github.event.issue.title }}](${{ github.event.issue.html_url }})

        ğŸ‘¥ Assignees: 
              ${{ join(github.event.issue.assignees.*.login, ', ') }}

        ğŸ·ï¸ Labels: 
              ${{ join(github.event.issue.labels.*.name, ', ') }}

        ğŸ“Š State: **${{ github.event.issue.state }}**

        ğŸ‘¤ Updated by: **${{ github.actor }}**

  # issue_assign_notify:
  #   if: github.event.action == 'assigned'
  #   uses: ./.github/workflows/discord-notify.yml
  #   with:
  #     discord-webhook-url: ${{vars.DISCORD_ISSUE_WEBHOOK_URL}}
  #     content: |
  #       ğŸ–‹ï¸ **Issue Assigned**

  #       ${{toJSON(github.event)}}

  #       **${{github.event.issue.user.login}} updated the issue [#${{github.event.issue.number}}](${{ github.event.issue.html_url }})**

  #       ### [${{ github.event.issue.title }}](${{ github.event.issue.html_url }})

  #       ğŸ‘¥ Assignees: ${{ join(github.event.issue.assignees.*.login, ', ') }}

  #       ğŸ·ï¸ Labels: ${{ join(github.event.issue.labels.*.name, ', ') }}

  #       ğŸ“Š State: **${{ github.event.issue.state }}**

  #       ğŸ‘¤ Assigned by: **${{ github.actor }}**
